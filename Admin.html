<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Panel</title>
<style>
  body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin:0; padding:0; background:#f5f7fa; }
  #overlay { display:none; position:fixed; inset:0; background:rgba(0,0,0,0.55); z-index:9998; }
  #adminPanel { display:none; position:fixed; top:5%; left:50%; transform:translateX(-50%); width:95%; max-width:1100px; background:#fff; border-radius:10px; padding:25px; box-shadow:0 8px 25px rgba(0,0,0,0.25); z-index:9999; max-height:90vh; overflow-y:auto; }
  #closeBtn { float:right; background:#e53935; color:#fff; border:none; padding:8px 14px; font-weight:bold; border-radius:5px; cursor:pointer; }

  header { font-size:1.6rem; font-weight:700; color:#fff; background:#4f46e5; padding:18px 25px; border-radius:8px 8px 0 0; margin-bottom:20px; }

  .tabs { display:flex; background:#fff; border-bottom:3px solid #4f46e5; cursor:pointer; }
  .tab { flex:1; text-align:center; padding:12px 0; font-weight:600; color:#4f46e5; border-bottom:3px solid transparent; transition:0.3s; }
  .tab.active { border-bottom-color:#4f46e5; background:#edf0fc; }

  .tab-panel { display:none; padding:20px 0; }
  .tab-panel.active { display:block; }

  table { width:100%; border-collapse:collapse; margin-top:10px; }
  th, td { padding:12px 15px; border-bottom:1px solid #ddd; text-align:left; }
  th { background:#e1defe; color:#4f46e5; }

  .status { padding:6px 12px; border-radius:15px; font-weight:600; font-size:0.9rem; display:inline-block; }
  .status.approved { background:#22c55e; color:#fff; }
  .status.rejected { background:#ef4444; color:#fff; }
  .status.pending { background:#fbbf24; color:#333; }

  .action-btn { padding:5px 12px; margin-right:5px; border:none; border-radius:5px; font-weight:600; cursor:pointer; }
  .action-btn.approve { background:#22c55e; color:#fff; }
  .action-btn.reject { background:#ef4444; color:#fff; }

  #searchBooking { width:100%; padding:8px 12px; margin-bottom:10px; border-radius:5px; border:1px solid #ccc; }
</style>
</head>
<body>

<div id="overlay"></div>

<div id="adminPanel" aria-hidden="true">
   <button id="closeBtn"><a href="index.html">Home</a></button>
  <button id="closeBtn">Close</button>
  <header>Admin Dashboard</header>

  <div class="tabs">
    <div class="tab active" data-tab="users">Users</div>
    <div class="tab" data-tab="photographers">Photographers</div>
    <div class="tab" data-tab="videos">Videos</div>
  </div>

  <div class="tab-panel active" id="users">
    <table>
      <thead>
        <tr>
          <th>Name</th><th>Email</th><th>Phone</th><th>Status</th><th>Actions</th>
        </tr>
      </thead>
      <tbody id="usersTableBody">
        <!-- Rows dynamically inserted here -->
      </tbody>
    </table>
  </div>

  <div class="tab-panel" id="photographers">
    <table>
      <thead>
        <tr>
          <th>Name</th><th>Email</th><th>Phone</th><th>Location</th><th>Status</th><th>Actions</th>
        </tr>
      </thead>
      <tbody id="photographersTableBody">
        <!-- Rows dynamically inserted here -->
      </tbody>
    </table>
  </div>

  <div class="tab-panel" id="videos">
    <table>
      <thead>
        <tr>
          <th>Video Title</th><th>Uploader</th><th>Status</th><th>Actions</th>
        </tr>
      </thead>
      <tbody id="videosTableBody">
        <!-- Rows dynamically inserted here -->
      </tbody>
    </table>
  </div>

  <h3>Bookings</h3>
  <input type="text" id="searchBooking" placeholder="Search Bookings...">
  <table>
    <thead style="background:#004aad; color:#fff;">
      <tr>
        <th>Booking ID</th><th>Photographer</th><th>User Name</th><th>Phone</th><th>Email</th><th>Location</th><th>Date</th><th>Shift</th><th>Amount</th><th>Status</th>
      </tr>
    </thead>
    <tbody id="bookingsBody"></tbody>
  </table>
</div>

<script>
const adminPanel = document.getElementById('adminPanel');
const overlay = document.getElementById('overlay');
const closeBtn = document.getElementById('closeBtn');
const adminPassword = "darshanaAdmin2025";

// Sample data arrays
const users = [];
const photographers = [];
const videos = [];
const bookings = [];

// Admin panel open
function openAdmin() {
  const userPass = prompt("Enter Admin Password:");
  if(userPass === adminPassword){
    adminPanel.style.display = "block";
    overlay.style.display = "block";
    adminPanel.setAttribute('aria-hidden','false');
    renderTables();
  } else if(userPass !== null) alert("Incorrect Password!");
}
closeBtn.onclick = overlay.onclick = () => {
  adminPanel.style.display = "none";
  overlay.style.display = "none";
  adminPanel.setAttribute('aria-hidden','true');
};
document.addEventListener('keydown', e => {
  if(e.ctrlKey && e.shiftKey && e.key.toLowerCase() === 'a') openAdmin();
});

// Tabs
const tabs = document.querySelectorAll('.tab');
const panels = document.querySelectorAll('.tab-panel');
tabs.forEach(tab => {
  tab.addEventListener('click', () => {
    tabs.forEach(t => t.classList.remove('active'));
    panels.forEach(p => p.classList.remove('active'));
    tab.classList.add('active');
    document.getElementById(tab.dataset.tab).classList.add('active');
  });
});

// Render dynamic tables
function renderTables(){
  const usersBody = document.getElementById('usersTableBody');
  const photographersBody = document.getElementById('photographersTableBody');
  const videosBody = document.getElementById('videosTableBody');
  const bookingsBodyEl = document.getElementById('bookingsBody');

  // Clear
  usersBody.innerHTML = photographersBody.innerHTML = videosBody.innerHTML = bookingsBodyEl.innerHTML = "";

  // Users
  users.forEach((u,i)=>{
    const tr = document.createElement('tr');
    tr.innerHTML = `<td>${u.name}</td><td>${u.email}</td><td>${u.phone}</td>
      <td><span class="status ${u.status.toLowerCase()}">${u.status}</span></td>
      <td>
        ${u.status==="Pending"?`<button class="action-btn approve">Approve</button><button class="action-btn reject">Reject</button>`:""}
      </td>`;
    usersBody.appendChild(tr);
  });

  // Photographers
  photographers.forEach((p)=>{
    const tr = document.createElement('tr');
    tr.innerHTML = `<td>${p.name}</td><td>${p.email}</td><td>${p.phone}</td><td>${p.location}</td>
      <td><span class="status ${p.status.toLowerCase()}">${p.status}</span></td>
      <td>
        ${p.status==="Pending"?`<button class="action-btn approve">Approve</button><button class="action-btn reject">Reject</button>`:""}
      </td>`;
    photographersBody.appendChild(tr);
  });

  // Videos
  videos.forEach(v=>{
    const tr = document.createElement('tr');
    tr.innerHTML = `<td>${v.title}</td><td>${v.uploader}</td>
      <td><span class="status ${v.status.toLowerCase()}">${v.status}</span></td>
      <td>
        ${v.status==="Pending"?`<button class="action-btn approve">Approve</button><button class="action-btn reject">Reject</button>`:""}
      </td>`;
    videosBody.appendChild(tr);
  });

  // Bookings
  bookings.forEach(b=>{
    const tr = document.createElement('tr');
    tr.innerHTML = `<td>${b.id}</td><td>${b.photographer}</td><td>${b.user}</td>
      <td>${b.phone}</td><td>${b.email}</td><td>${b.location}</td>
      <td>${b.date}</td><td>${b.shift}</td><td>${b.amount}</td>
      <td><span class="status ${b.status.toLowerCase()}">${b.status}</span></td>`;
    bookingsBodyEl.appendChild(tr);
  });

  attachActionListeners();
}

// Approve/Reject actions
function attachActionListeners(){
  document.querySelectorAll('.action-btn.approve').forEach(btn=>{
    btn.onclick = () => {
      const row = btn.closest('tr');
      const statusSpan = row.querySelector('.status');
      statusSpan.textContent = 'Approved';
      statusSpan.className = 'status approved';
      row.querySelectorAll('.action-btn').forEach(b=>b.remove());
    }
  });
  document.querySelectorAll('.action-btn.reject').forEach(btn=>{
    btn.onclick = () => {
      const row = btn.closest('tr');
      const statusSpan = row.querySelector('.status');
      statusSpan.textContent = 'Rejected';
      statusSpan.className = 'status rejected';
      row.querySelectorAll('.action-btn').forEach(b=>b.remove());
    }
  });
}

// Booking search
const searchBooking = document.getElementById("searchBooking");
searchBooking.addEventListener("input", () => {
  const filter = searchBooking.value.toLowerCase();
  const rows = document.getElementById("bookingsBody").getElementsByTagName("tr");
  for(let row of rows){
    row.style.display = Array.from(row.cells).some(cell => cell.textContent.toLowerCase().includes(filter)) ? "" : "none";
  }
});
</script>
</body>
</html>
